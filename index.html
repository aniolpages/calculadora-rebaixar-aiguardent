<!doctype html>

<!--- © 2019 Aniol Pagès--->

<html>
<head>
<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>calculadora.ratafia.app - Confraria de la Ratafia</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">


	<style type="text/css">
		body {
			padding: 10px;
			box-sizing: border-box;
		}
		div {
			box-sizing: border-box;
  width: 100%;
  border: 12px solid white;
  padding: 20px;
			
  
}
		h1 {
			
			font-family: Helvetica, sans-serif;
			font-weight: 900;
			text-align: center;
			color: white;
		}
		h4 {
			
			font-family: Helvetica, sans-serif;
			
			text-align: center;
			color: white;
		}
		h5 {
			
			font-family: Helvetica, sans-serif;
			margin: -15px 0px 7px 0;
			color: white;
			font-weight: 200;
		}
		h2 {
			
			font-family: Helvetica, sans-serif;
			font-weight: 900;
			
			color: white;
		}
		h3 {
			
			font-family: Helvetica, sans-serif;
			font-weight: 500;
			
			color: white;
		}
		input {
			display: inline-block;
  color: white;
  padding: 10px;
  width: 100%;
  box-sizing: border-box;
  background-color: rgba(0,0,0,0.25);
  border: none;
  margin: 0px auto;
  transition:background-color 0.5s ease;
			font-size: 16px;
}
	.preloader {
   position: absolute;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   z-index: 9999;
   background-image: url('../loader.gif');
   background-repeat: no-repeat; 
   background-color: #93613F;
   background-position: center;
}	
		
	
	</style>
	<script>$(window).load(function() {
   $('.preloader').fadeOut('slow');
});</script>
</head>

<body bgcolor="#93613F">
	<div class="preloader"></div>
	<div class="app_frame">
	<h1>Calculadora per rebaixar l'aiguardent de la ratafia</h1>
		
		<h4>Amb aquesta calculadora podràs saber fàcilment quants mil·lilitres d'aigua i grams de sucre has d'afegir a la teva ratafia per aconseguir la graduació d'alcohol desitjada.</h4>
		<br>
		<form>
			<h3>Volum d'aiguardent que s'ha de rebaixar:</h3>
			<h5>Atenció: després de la maceració i filtratge el volum i el grau de l’aiguardent haurà disminuït en relació a la quantitat i grau inicial.</h5>
		<input type="text" name="a_in" id="a_in" placeholder="Volum en ml..." onkeyup="novesDades()" onchange="novesDades()">
			<br>
			<h3>Graduació d'alcohol de l'aiguardent:</h3>
			<h5>Nota: es mesura amb un alcoholímitre, sempre que l’aiguardent no porti o hi haguem afegit sucre.</h5>
			<input type="text" name="b_in" id="b_in" placeholder="% d'alcohol..." onkeyup="novesDades()" onchange="novesDades()">
			<br>
			<h3>Graduació d'alcohol desitjada:</h3>
			<input type="text" name="n_in" id="n_in" placeholder="% d'alcohol..." onkeyup="novesDades()" onchange="novesDades()">
			<br>
			<h3>Sucre que vols afegir per litre:</h3>
			<input type="text" name="g_in" id="g_in" placeholder="Sucre en grams..." onkeyup="novesDades()" onchange="novesDades()">
		
		</form>
		<h2 id="resultat"></h2>
	</div>
	<script>
	function novesDades() {
		var A = document.getElementsByName("a_in") [0].value;
		var B = document.getElementsByName("b_in") [0].value;
		var S = document.getElementsByName("g_in") [0].value;
		var N = document.getElementsByName("n_in") [0].value;
		let M = N / "100";
		let Y = B / "100";
		let C = A * Y;
		let D = C / M;
		let E = D - A;
		let Z = D / "1000";
		let X = S * Z;
		let G = X * "0.6";
		let H = E - G;
		let J = Math.round(X)
		let R = Math.round(H)
		document.getElementById('resultat').innerHTML = "Has d'afegir " + R + " ml d'aigua i " + J + " g de sucre a la teva ratafia.";
		
		
	}
		function setInputFilter(textbox, inputFilter) {
  ["input", "keydown", "keyup", "mousedown", "mouseup", "select", "contextmenu", "drop"].forEach(function(event) {
    textbox.addEventListener(event, function() {
      if (inputFilter(this.value)) {
        this.oldValue = this.value;
        this.oldSelectionStart = this.selectionStart;
        this.oldSelectionEnd = this.selectionEnd;
      } else if (this.hasOwnProperty("oldValue")) {
        this.value = this.oldValue;
        this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
      }
    });
  });
}
setInputFilter(document.getElementById("b_in"), function(value) {
  return /^\d*\.?\d*$/.test(value);
});
		setInputFilter(document.getElementById("a_in"), function(value) {
  return /^\d*\.?\d*$/.test(value);
});
		setInputFilter(document.getElementById("g_in"), function(value) {
  return /^\d*\.?\d*$/.test(value);
});
		setInputFilter(document.getElementById("n_in"), function(value) {
  return /^\d*\.?\d*$/.test(value);
});
	</script>
</body>
</html>
